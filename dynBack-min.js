function DynamicBackground(c,f,e){var d="background"+Math.round(Math.random()*9999999999).toString();$(c).prepend('<canvas id="'+d+'">If this appears then HTML5 is not supported.</canvas>');this.canvas=$("#"+d)[0];$(this.canvas).css({position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%","z-index":"-1"});$(this.canvas).parent().css({"z-index":"-2"});this.context=this.canvas.getContext("2d");a();this.w=c.width;this.h=c.height;this.particles=[];for(var b=0;b<e;b++){this.particles.push(new Particle(genRandomParticleVars(this)))}this.updating=f;$(window).resize(a);function a(){$("#"+d).attr("width",$(c).width());$("#"+d).attr("height",$(c).height())}if(f){window.requestAnimationFrame(this.update.bind(this))}}DynamicBackground.prototype.resetParticles=function(){var b=this.particles.length;this.particles=[];for(var a=0;a<b;a++){this.particles.push(new Particle(genRandomParticleVars(this)))}};DynamicBackground.prototype.update=function(){for(var a=0;a<this.particles.length;a++){this.particles[a].update()}if(this.updating){window.requestAnimationFrame(this.update.bind(this))}};DynamicBackground.prototype.start=function(){this.updating=true;window.requestAnimationFrame(this.update.bind(this))};DynamicBackground.prototype.pause=function(){this.updating=false};DynamicBackground.prototype.setType=function(a){switch(a){case this.threads:Particle.prototype.update=Particle.prototype.threads;break;case this.splatScreen:Particle.prototype.update=Particle.prototype.splatScreen;break}this.resetParticles()};DynamicBackground.prototype.threads=0;DynamicBackground.prototype.splatScreen=1;function genRandomParticleVars(a){var b={};b.x=Math.random()*a.canvas.width;b.y=Math.random()*a.canvas.height;b.z=Math.random()*10;b.h=Math.random()*50;b.w=b.h;b.r=Math.ceil((Math.random()*255));b.g=Math.ceil((Math.random()*255));b.b=Math.ceil((Math.random()*255));b.velocity={x:(Math.random()*20)-10,y:(Math.random()*20)-10,z:((Math.random()*-1)-0.2)};b.background=a;return b}function Particle(a){this.x=a.x;this.y=a.y;this.z=a.z;this.h=a.h;this.w=a.w;this.r=a.r;this.g=a.g;this.b=a.b;this.background=a.background;this.velocity=a.velocity}Particle.prototype.terminalVelocity=10;Particle.prototype.move=function(){this.x+=this.velocity.x;this.y+=this.velocity.y;this.z+=this.velocity.z;if(this.z<0){this.z=1}};Particle.prototype.reset=function(){this.x=Math.random()*background.canvas.width;this.y=Math.random()*background.canvas.height;this.z=Math.random()*100;this.h=100;this.w=this.h;this.r=Math.ceil((Math.random()*255));this.g=Math.ceil((Math.random()*255));this.b=Math.ceil((Math.random()*255));this.velocity={x:(Math.random()*20)-10,y:(Math.random()*20)-10,z:((Math.random()*-1)-0.2)}};Particle.prototype.threads=function(){this.move();if(this.x<-this.w){this.x=this.background.canvas.width}else{if(this.x>this.background.canvas.width){this.x=-this.w}else{if(this.y<-this.h){this.y=this.background.canvas.height}else{if(this.y>this.background.canvas.height){this.y=-this.h}}}}this.background.context.beginPath();this.background.context.arc(this.x+(this.w/2),this.y+(this.h/2),this.w/2,0,2*Math.PI,false);this.background.context.fillStyle=rgbToHex(this.r,this.g,this.b);this.background.context.fill();this.background.context.stroke()};Particle.prototype.splatScreen=function(){this.move();if(this.velocity.y>0){this.velocity.y*=-1}if(this.velocity.y<this.terminalVelocity){this.velocity.y+=0.1}if(this.velocity.x>0.1){this.velocity.x-=0.1}else{if(this.velocity.x<-0.1){this.velocity.x+=0.1}else{this.velocity.x=0}}if(this.x<-this.w){this.x=this.background.canvas.width}else{if(this.x>this.background.canvas.width){this.x=-this.w}else{if(this.y<-this.h){this.y=this.background.canvas.height}else{if(this.y>this.background.canvas.height){this.y=-this.h}else{if(this.z<=1){this.reset()}}}}}var b=this.h/this.z;var a=this.w/this.z;this.background.context.beginPath();this.background.context.arc(this.x+(a/2),this.y+(b/2),a/2,0,2*Math.PI,false);this.background.context.fillStyle=rgbToHex(this.r,this.g,this.b);this.background.context.fill();this.background.context.stroke()};Particle.prototype.update=Particle.prototype.threads;